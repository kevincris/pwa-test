{"version":3,"sources":["webpack:///src/app/stripe-payment/stripe-payment-component.ts","webpack:///src/app/kyc-wizard/ubo-wizard-completed-modal.component.html","webpack:///src/app/common/logged-in.auth-guard.ts","webpack:///src/app/stripe-payment/stripe.module.ts","webpack:///src/app/kyc-wizard/kyc-wizard.auth-guard.ts","webpack:///src/app/stripe-payment/stripe-payment.component.html","webpack:///src/app/kyc-wizard/key-wizard-completed-modal.component.ts","webpack:///src/app/kyc-wizard/kyc-wizard.component.ts","webpack:///src/app/kyc-wizard/kyc-wizard.module.ts","webpack:///node_modules/@stripe/stripe-js/dist/pure.js","webpack:///src/app/kyc-wizard/ubo-wizard-completed-modal.component.ts","webpack:///src/app/kyc-wizard/ubo-wizard.component.ts","webpack:///src/app/kyc-wizard/kyc-wizard-completed-modal.component.html","webpack:///node_modules/@stripe/stripe-js/pure.js","webpack:///src/app/kyc-wizard/ubo-wizard.component.html","webpack:///src/app/kyc-wizard/kyc-wizard.component.html","webpack:///src/app/kyc-wizard/kyc-wizard-routing.module.ts","webpack:///src/app/common/services/basis-id.service.ts"],"names":["StripePaymentComponent","http","session","toastr","translate","isCardEmpty","isLoading","stripeState","onSuccess","subscriptions","window","STRIPE_PUBLIC_KEY","stripe","add","userStream","pipe","user","post","id","subscribe","clientSecret","elements","card","create","mount","on","event","empty","cardError","error","message","unsubscribe","confirmCardPayment","payment_method","result","success","instant","emit","selector","template","LoggedInAuthGuard","router","_","state","isAuthenticated","parseUrl","url","providedIn","StripeModule","declarations","exports","imports","KycWizardAuthGuard","approvedAt","KycWizardCompletedModalComponent","modal","KycWizardComponent","basisId","confirmation","ngbModal","appName","accountOpeningFeeEnabled","accountOpeningFee","running","hasCompleted","isPaymentSuccessful","faSearch","faUserClock","faShieldCheck","faMoneyCheckEditAlt","get","fee","verification","completed","open","backdrop","keyboard","centered","then","navigate","onError","show","type","text","showCancel","confirmText","location","reload","head","params","JSON","stringify","observe","response","hasCompletedVerification","headers","has","init","DEBUG","console","log","hash","scroll","loadWidget","key","BASIS_ID_KYB_KEY","BASIS_ID_KYC_KEY","formToken","KycWizardModule","Object","defineProperty","value","_typeof","obj","Symbol","iterator","constructor","prototype","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","findScript","scripts","document","querySelectorAll","concat","i","length","script","test","src","injectScript","queryString","advancedFraudSignals","createElement","headOrBody","body","Error","appendChild","registerWrapper","startTime","_registerWrapper","name","version","stripePromise","loadScript","Promise","resolve","reject","Stripe","warn","addEventListener","initStripe","maybeStripe","args","apply","undefined","validateLoadParams","errorMessage","keys","loadParams","loadStripeCalled","loadStripe","_len","arguments","Array","_key","Date","now","setLoadParameters","UboWizardCompletedModalComponent","close","UboWizardComponent","route","year","getFullYear","logout","queryParamMap","invite","module","routes","path","component","canActivate","KycWizardRoutingModule","forChild","providers","BasisIdService","subscriber","BAS","async","next","complete","getElementsByTagName","options","AS","initFrame","bas_gw","container_id","ui","width","height","style","mobile_height","api_form_token","events","onManualCheck","status","showWidget"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAcaA,sBAAsB;AAe/B,wCACYC,IADZ,EAEYC,OAFZ,EAGYC,MAHZ,EAIWC,SAJX,EAIsC;AAAA;;AAH1B,eAAAH,IAAA,GAAAA,IAAA;AACA,eAAAC,OAAA,GAAAA,OAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACD,eAAAC,SAAA,GAAAA,SAAA;AAfJ,eAAAC,WAAA,GAAc,IAAd;AACA,eAAAC,SAAA,GAAY,KAAZ;AACA,eAAAC,WAAA,GAAuD,SAAvD;AAGS,eAAAC,SAAA,GAAY,IAAI,0DAAJ,EAAZ;AAIR,eAAAC,aAAA,GAAgB,IAAI,iDAAJ,EAAhB;AAOJ;;AApB2B;AAAA;AAAA,iBAsBlB,oBAAQ;;;;;;;;0BACZC,MAAM,CAACC,iB;;;;;AACR,2BAAKJ,WAAL,GAAmB,gBAAnB;;;;AAGJ,2BAAKA,WAAL,GAAmB,QAAnB;;AACc,6BAAM,0EAAWG,MAAM,CAACC,iBAAlB,CAAN;;;AAAd,2BAAKC,M;AACL,2BAAKH,aAAL,CAAmBI,GAAnB,CACI,KAAKX,OAAL,CAAaY,UAAb,CACKC,IADL,CAEQ,4DAAK,CAAL,CAFR,EAGQ,+DAAQ,UAAAC,IAAI;AAAA,+BACR,KAAI,CAACf,IAAL,CAAUgB,IAAV,kBAAmDD,IAAI,CAACE,EAAxD,qCAA4F,EAA5F,CADQ;AAAA,uBAAZ,CAHR,EAOKC,SAPL,CAOe,gBAAsB;AAAA,4BAAnBC,YAAmB,QAAnBA,YAAmB;;;;AAC7B,6BAAI,CAACA,YAAL,GAAoBA,YAApB;AACA,4BAAMC,QAAQ,GAAG,CAAH,KAAG,KAAI,CAACT,MAAL,MAAW,IAAX,IAAW,aAAX,GAAW,MAAX,GAAW,GAAES,QAAF,EAA5B;AACA,6BAAI,CAACC,IAAL,GAAYD,QAAQ,SAAR,IAAAA,QAAQ,WAAR,GAAQ,MAAR,GAAAA,QAAQ,CAAEE,MAAV,CAAiB,MAAjB,CAAZ;;AACA,6BAAI,CAACD,IAAL,CAAUE,KAAV,CAAgB,eAAhB;;AACA,6BAAI,CAACF,IAAL,CAAUG,EAAV,CAAa,QAAb,EAAuB,UAAAC,KAAK,EAAI;;;AAC5B,+BAAI,CAACrB,WAAL,GAAmBqB,KAAK,CAACC,KAAzB;AACA,+BAAI,CAACC,SAAL,GAAiB,CAAH,KAAGF,KAAK,CAACG,KAAN,MAAW,IAAX,IAAW,aAAX,GAAW,MAAX,GAAW,GAAEC,OAA9B;AACH,yBAHD;AAIH,uBAhBL,CADJ;;;;;;;;;AAmBH;AAhD8B;AAAA;AAAA,iBAkDxB,uBAAW;AACd,iBAAKrB,aAAL,CAAmBsB,WAAnB;AACH;AApD8B;AAAA;AAAA,iBAsDlB,kBAAM;;;;;;;;;AACf,2BAAKzB,SAAL,GAAiB,IAAjB;;;AAEmB,mCAAM,KAAKM,MAAX,MAAiB,IAAjB,IAAiB,aAAjB,GAAiB,MAAjB,GAAiB,GAAEoB,kBAAF,CAAqB,KAAKZ,YAA1B,EAAwC;AACpEa,sCAAc,EAAE;AACZX,8BAAI,EAAE,KAAKA;AADC;AADoD,uBAAxC,CAAjB;;;AAATY,4B;;4BAKFA,MAAM,SAAN,IAAAA,MAAM,WAAN,GAAM,MAAN,GAAAA,MAAM,CAAEL,K;;;;;AACR,2BAAK1B,MAAL,CAAY0B,KAAZ,CAAkBK,MAAM,CAACL,KAAP,CAAaC,OAAb,IAAwB,sBAA1C;;;;AAGJ,2BAAK3B,MAAL,CAAYgC,OAAZ,CAAoB,KAAK/B,SAAL,CAAegC,OAAf,CAAuB,mCAAvB,CAApB;AACA,2BAAK5B,SAAL,CAAe6B,IAAf;;;;AAEA,2BAAK/B,SAAL,GAAiB,KAAjB;;;;;;;;;;AAEP;AAvE8B;;AAAA;AAAA,S;;;;gBAd1B;;gBAOA;;gBACA;;gBANA;;;;;;gBAoBJ;;;AARQN,4BAAsB,6DAJlC,gEAAU;AACPsC,gBAAQ,EAAE,gBADH;AAEPC,gBAAQ,EAAR;AAFO,OAAV,CAIkC,GAAtBvC,sBAAsB,CAAtB;;;;;;;;;;;;;;;;ACdb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCKFwC,iBAAiB;AAC1B,mCAAoBtC,OAApB,EAAqDuC,MAArD,EAAqE;AAAA;;AAAjD,eAAAvC,OAAA,GAAAA,OAAA;AAAiC,eAAAuC,MAAA,GAAAA,MAAA;AAAkB;;AAD7C;AAAA;AAAA,iBAEnB,qBAAYC,CAAZ,EAAuCC,KAAvC,EAAiE;AACpE,gBAAI,CAAC,KAAKzC,OAAL,CAAa0C,eAAb,EAAL,EAAqC;AACjC,qBAAO,KAAKH,MAAL,CAAYI,QAAZ,CAAqB,qBAAqBF,KAAK,CAACG,GAAhD,CAAP;AACH;;AACD,mBAAO,IAAP;AACH;AAPyB;;AAAA;AAAA,S;;;;gBAHrB;;gBADqC;;;;AAIjCN,uBAAiB,6DAD7B,iEAAW;AAAEO,kBAAU,EAAE;AAAd,OAAX,CAC6B,GAAjBP,iBAAiB,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCIAQ,YAAY;AAAA;AAAA,Q;;AAAZA,kBAAY,6DALxB,+DAAS;AACNC,oBAAY,EAAE,CAAC,gFAAD,CADR;AAENC,eAAO,EAAE,CAAC,gFAAD,CAFH;AAGNC,eAAO,EAAE,CAAC,kEAAD;AAHH,OAAT,CAKwB,GAAZH,YAAY,CAAZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCJAI,kBAAkB;AAC3B,oCAAoBlD,OAApB,EAAqDuC,MAArD,EAAqE;AAAA;;AAAjD,eAAAvC,OAAA,GAAAA,OAAA;AAAiC,eAAAuC,MAAA,GAAAA,MAAA;AAAkB;;AAD5C;AAAA;AAAA,iBAEpB,uBAAW;AACd,gBAAI,KAAKvC,OAAL,CAAac,IAAb,CAAkBqC,UAAtB,EAAkC;AAC9B,qBAAO,KAAKZ,MAAL,CAAYI,QAAZ,CAAqB,YAArB,CAAP;AACH;;AACD,mBAAO,IAAP;AACH;AAP0B;;AAAA;AAAA,S;;;;gBAHtB;;gBADa;;;;AAITO,wBAAkB,6DAD9B,kEAC8B,GAAlBA,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACLb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCOFE,gCAAgC,6BACzC,0CAAmBC,KAAnB,EAA0C;AAAA;;AAAvB,aAAAA,KAAA,GAAAA,KAAA;AAAyB,OADH,C;;;;gBANpC;;;;AAMID,sCAAgC,6DAJ5C,gEAAU;AACPhB,gBAAQ,EAAE,4BADH;AAEPC,gBAAQ,EAAR;AAFO,OAAV,CAI4C,GAAhCe,gCAAgC,CAAhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCYAE,kBAAkB;AAoB3B,oCACYC,OADZ,EAEYxD,IAFZ,EAGYwC,MAHZ,EAIYiB,YAJZ,EAKWxD,OALX,EAMWE,SANX,EAOYuD,QAPZ,EAO8B;AAAA;;AANlB,eAAAF,OAAA,GAAAA,OAAA;AACA,eAAAxD,IAAA,GAAAA,IAAA;AACA,eAAAwC,MAAA,GAAAA,MAAA;AACA,eAAAiB,YAAA,GAAAA,YAAA;AACD,eAAAxD,OAAA,GAAAA,OAAA;AACA,eAAAE,SAAA,GAAAA,SAAA;AACC,eAAAuD,QAAA,GAAAA,QAAA;AA1BL,eAAAC,OAAA,GAAU,0EAAYA,OAAtB;AAGA,eAAAC,wBAAA,GAA2B,0EAAYA,wBAAvC;AACA,eAAAC,iBAAA,GAAoB,MAApB;AAEA,eAAAC,OAAA,GAAU,KAAV;AACA,eAAAzD,SAAA,GAAY,KAAZ;AACA,eAAA0D,YAAA,GAAe,KAAf;AACA,eAAAC,mBAAA,GAAsB,KAAtB;AAEA,eAAAC,QAAA,GAAW,2EAAX;AACA,eAAAC,WAAA,GAAc,8EAAd;AACA,eAAAC,aAAA,GAAgB,gFAAhB;AACA,eAAAC,mBAAA,GAAsB,sFAAtB;AAEC,eAAA5D,aAAA,GAAgB,IAAI,iDAAJ,EAAhB;AAWJ;;AA5BuB;AAAA;AAAA,iBA8BpB,oBAAQ;AAAA;;AACX,gBAAI,KAAKoD,wBAAT,EAAmC;AAC/B,mBAAKpD,aAAL,CAAmBI,GAAnB,CACI,KAAKX,OAAL,CAAaY,UAAb,CACKC,IADL,CAEQ,4DAAK,CAAL,CAFR,EAGQ,+DAAQ,UAAAC,IAAI;AAAA,uBACR,sDAAS,CACL,MAAI,CAACf,IAAL,CAAUqE,GAAV,kBAA+BtD,IAAI,CAACE,EAApC,EADK,EAEL,MAAI,CAACjB,IAAL,CAAUqE,GAAV,kBAAuDtD,IAAI,CAACE,EAA5D,0BAFK,CAAT,CADQ;AAAA,eAAZ,CAHR,EAUKC,SAVL,CAUe,iBAAiB;AAAA;AAAA,oBAAfH,IAAe;AAAA,oBAATuD,GAAS;;AACxB,sBAAI,CAACvD,IAAL,GAAYA,IAAZ;AACA,sBAAI,CAAC8C,iBAAL,GAAyBS,GAAG,CAACT,iBAA7B;AACH,eAbL,CADJ;AAgBH;AACJ;AAjD0B;AAAA;AAAA,iBAmDd,2BAAe;;;;;;;;AACxB,2BAAKrD,aAAL,CAAmBI,GAAnB,CACI,KAAK4C,OAAL,CAAajD,SAAb,CACKO,IADL,CAEQ,+DAAQ;AAAA,+BACJ,MAAI,CAACd,IAAL,CAAUgB,IAAV,0BAAuC,MAAI,CAACuD,YAAL,CAAkBtD,EAAzD,qBAA6E;AACzEuD,mCAAS,EAAE;AAD8D,yBAA7E,CADI;AAAA,uBAAR,CAFR,EAQKtD,SARL,CAQe;AAAA,+BAAY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACboC,uCADa,GACL,KAAKI,QAAL,CAAce,IAAd,CAAmB,uGAAnB,EAAqD;AAC/DC,4CAAQ,EAAE,QADqD;AAE/DC,4CAAQ,EAAE,KAFqD;AAG/DC,4CAAQ,EAAE;AAHqD,mCAArD,CADK;AAAA;AAMnB,yCAAMtB,KAAK,CAACrB,MAAN,CAAa4C,IAAb,CAAkB;AAAA,2CAAM,MAAI,CAACrC,MAAL,CAAYsC,QAAZ,CAAqB,CAAC,YAAD,CAArB,CAAN;AAAA,mCAAlB,CAAN;;AANmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAZ;AAAA,uBARf,CADJ;AAkBA,2BAAKtE,aAAL,CAAmBI,GAAnB,CACI,KAAK4C,OAAL,CAAauB,OAAb,CACKjE,IADL,CAEQ,+DAAQ;AAAA,+BACJ,MAAI,CAAC2C,YAAL,CAAkBuB,IAAlB,CAAuB;AACnBC,8BAAI,EAAE,SADa;AAEnBC,8BAAI,EAAE,MAAI,CAAC/E,SAAL,CAAegC,OAAf,CAAuB,4CAAvB,CAFa;AAGnBgD,oCAAU,EAAE,KAHO;AAInBC,qCAAW,EAAE,MAAI,CAACjF,SAAL,CAAegC,OAAf,CAAuB,aAAvB;AAJM,yBAAvB,CADI;AAAA,uBAAR,CAFR,EAWKjB,SAXL,CAWe,YAAM;AACbmE,gCAAQ,CAACC,MAAT;AACH,uBAbL,CADJ;AAiBA,2BAAKtF,IAAL,CACKuF,IADL,kBACoB,KAAKtF,OAAL,CAAac,IAAb,CAAkBE,EADtC,qBAC0D;AAClDuE,8BAAM,EAAE;AAAEhB,mCAAS,EAAEiB,IAAI,CAACC,SAAL,CAAe,IAAf;AAAb,yBAD0C;AAElDC,+BAAO,EAAE;AAFyC,uBAD1D,EAKKzE,SALL,CAKe,UAAA0E,QAAQ,EAAI;AACnB,4BAAMC,wBAAwB,GAC1BD,QAAQ,IAAIA,QAAQ,CAACE,OAAT,CAAiBC,GAAjB,CAAqB,eAArB,CAAZ,GAAoD,CAAC,CAACH,QAAQ,CAACE,OAAT,CAAiBzB,GAAjB,CAAqB,eAArB,CAAtD,GAA+F,CADnG;AAEA,8BAAI,CAACN,YAAL,GAAoB8B,wBAAwB,GAAG,CAA/C;AACH,uBATL;;;;;;;;;AAUH;AAjG0B;AAAA;AAAA,iBAmGpB,uBAAW;AACd,iBAAKrF,aAAL,CAAmBsB,WAAnB;AACH;AArG0B;AAAA;AAAA,iBAuGpB,6BAAiB;AAAA;;AACpB,iBAAKzB,SAAL,GAAiB,IAAjB;AACA,iBAAKmD,OAAL,CACKwC,IADL,GAEKlF,IAFL,CAGQ,+DAAQ;AAAA,qBACJ,MAAI,CAACd,IAAL,CAAUgB,IAAV,mBAA+C;AAC3CD,oBAAI,EAAE;AACFE,oBAAE,EAAE,MAAI,CAAChB,OAAL,CAAac,IAAb,CAAkBE;AADpB;AADqC,eAA/C,CADI;AAAA,aAAR,CAHR,EAUQ,gEAAS,YAAM;AACX,oBAAI,CAACZ,SAAL,GAAiB,KAAjB;AACH,aAFD,CAVR,EAcKa,SAdL,CAce,UAAAqD,YAAY,EAAI;AACvB,kBAAI9D,MAAM,CAACwF,KAAX,EAAkB;AACd;AACAC,uBAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B5B,YAAY,CAAC6B,IAA1C;AACH;;AACD3F,oBAAM,CAAC4F,MAAP,CAAc,CAAd,EAAiB,CAAjB;AACA,oBAAI,CAACvC,OAAL,GAAe,IAAf;;AACA,oBAAI,CAACN,OAAL,CAAa8C,UAAb,CAAwB;AACpBC,mBAAG,EAAE,MAAI,CAACtG,OAAL,CAAac,IAAb,CAAkBkE,IAAlB,KAA2B,UAA3B,GAAwCxE,MAAM,CAAC+F,gBAA/C,GAAmE/F,MAAM,CAACgG,gBAD3D;AAEpBC,yBAAS,EAAEnC,YAAY,CAACmC;AAFJ,eAAxB;;AAIA,oBAAI,CAACnC,YAAL,GAAoBA,YAApB;AACH,aA1BL;AA2BH;AApI0B;AAAA;AAAA,iBAsIpB,mBAAO;AACV,oBAAQ,0EAAYZ,OAApB;AACI,mBAAK,OAAL;AACA,mBAAK,SAAL;AACA,mBAAK,WAAL;AACI,uBAAO,qBAAP;;AACJ;AACI,uBAAO,sCAAP;AANR;AAQH;AA/I0B;AAAA;AAAA,iBAiJpB,0BAAc;AACjB,oBAAQ,0EAAYA,OAApB;AACI,mBAAK,OAAL;AACI,uBAAO,aAAP;;AACJ;AACI,uBAAO,eAAP;AAJR;AAMH;AAxJ0B;;AAAA;AAAA,S;;;;gBATtB;;gBAVA;;gBAEA;;gBASA;;gBACA;;gBAPA;;gBADA;;;;AAeIJ,wBAAkB,6DAJ9B,gEAAU;AACPlB,gBAAQ,EAAE,YADH;AAEPC,gBAAQ,EAAR;AAFO,OAAV,CAI8B,GAAlBiB,kBAAkB,CAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCNAoD,eAAe;AAAA;AAAA,Q;;AAAfA,qBAAe,6DAL3B,+DAAS;AACN3D,oBAAY,EAAE,CAAC,wEAAD,EAAqB,sGAArB,EAAuD,wEAAvD,CADR;AAENE,eAAO,EAAE,CAAC,kEAAD,EAAe,iFAAf,EAAuC,0EAAvC,CAFH;AAGND,eAAO,EAAE,CAAC,sGAAD;AAHH,OAAT,CAK2B,GAAf0D,eAAe,CAAf;;;;;;;;;;;;;;;;ACXbC,YAAM,CAACC,cAAP,CAAsB5D,OAAtB,EAA+B,YAA/B,EAA6C;AAAE6D,aAAK,EAAE;AAAT,OAA7C;;AAEA,eAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACpB;;AAEA,YAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA/D,EAAyE;AACvEH,iBAAO,GAAG,iBAAUC,GAAV,EAAe;AACvB,mBAAO,OAAOA,GAAd;AACD,WAFD;AAGD,SAJD,MAIO;AACLD,iBAAO,GAAG,iBAAUC,GAAV,EAAe;AACvB,mBAAOA,GAAG,IAAI,OAAOC,MAAP,KAAkB,UAAzB,IAAuCD,GAAG,CAACG,WAAJ,KAAoBF,MAA3D,IAAqED,GAAG,KAAKC,MAAM,CAACG,SAApF,GAAgG,QAAhG,GAA2G,OAAOJ,GAAzH;AACD,WAFD;AAGD;;AAED,eAAOD,OAAO,CAACC,GAAD,CAAd;AACD;;AAED,UAAIK,MAAM,GAAG,0BAAb;AACA,UAAIC,YAAY,GAAG,2CAAnB;AACA,UAAIC,uBAAuB,GAAG,kJAA9B;;AACA,UAAIC,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,YAAIC,OAAO,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,iBAAiBC,MAAjB,CAAwBP,MAAxB,EAAgC,KAAhC,CAA1B,CAAd;;AAEA,aAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACK,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,cAAIE,MAAM,GAAGN,OAAO,CAACI,CAAD,CAApB;;AAEA,cAAI,CAACP,YAAY,CAACU,IAAb,CAAkBD,MAAM,CAACE,GAAzB,CAAL,EAAoC;AAClC;AACD;;AAED,iBAAOF,MAAP;AACD;;AAED,eAAO,IAAP;AACD,OAdD;;AAgBA,UAAIG,YAAY,GAAG,SAASA,YAAT,CAAsB1C,MAAtB,EAA8B;AAC/C,YAAI2C,WAAW,GAAG3C,MAAM,IAAI,CAACA,MAAM,CAAC4C,oBAAlB,GAAyC,6BAAzC,GAAyE,EAA3F;AACA,YAAIL,MAAM,GAAGL,QAAQ,CAACW,aAAT,CAAuB,QAAvB,CAAb;AACAN,cAAM,CAACE,GAAP,GAAa,GAAGL,MAAH,CAAUP,MAAV,EAAkBO,MAAlB,CAAyBO,WAAzB,CAAb;AACA,YAAIG,UAAU,GAAGZ,QAAQ,CAACnC,IAAT,IAAiBmC,QAAQ,CAACa,IAA3C;;AAEA,YAAI,CAACD,UAAL,EAAiB;AACf,gBAAM,IAAIE,KAAJ,CAAU,6EAAV,CAAN;AACD;;AAEDF,kBAAU,CAACG,WAAX,CAAuBV,MAAvB;AACA,eAAOA,MAAP;AACD,OAZD;;AAcA,UAAIW,eAAe,GAAG,SAASA,eAAT,CAAyB/H,MAAzB,EAAiCgI,SAAjC,EAA4C;AAChE,YAAI,CAAChI,MAAD,IAAW,CAACA,MAAM,CAACiI,gBAAvB,EAAyC;AACvC;AACD;;AAEDjI,cAAM,CAACiI,gBAAP,CAAwB;AACtBC,cAAI,EAAE,WADgB;AAEtBC,iBAAO,EAAE,QAFa;AAGtBH,mBAAS,EAAEA;AAHW,SAAxB;AAKD,OAVD;;AAYA,UAAII,aAAa,GAAG,IAApB;;AACA,UAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBxD,MAApB,EAA4B;AAC3C;AACA,YAAIuD,aAAa,KAAK,IAAtB,EAA4B;AAC1B,iBAAOA,aAAP;AACD;;AAEDA,qBAAa,GAAG,IAAIE,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACrD,cAAI,OAAO1I,MAAP,KAAkB,WAAtB,EAAmC;AACjC;AACA;AACAyI,mBAAO,CAAC,IAAD,CAAP;AACA;AACD;;AAED,cAAIzI,MAAM,CAAC2I,MAAP,IAAiB5D,MAArB,EAA6B;AAC3BU,mBAAO,CAACmD,IAAR,CAAa9B,uBAAb;AACD;;AAED,cAAI9G,MAAM,CAAC2I,MAAX,EAAmB;AACjBF,mBAAO,CAACzI,MAAM,CAAC2I,MAAR,CAAP;AACA;AACD;;AAED,cAAI;AACF,gBAAIrB,MAAM,GAAGP,UAAU,EAAvB;;AAEA,gBAAIO,MAAM,IAAIvC,MAAd,EAAsB;AACpBU,qBAAO,CAACmD,IAAR,CAAa9B,uBAAb;AACD,aAFD,MAEO,IAAI,CAACQ,MAAL,EAAa;AAClBA,oBAAM,GAAGG,YAAY,CAAC1C,MAAD,CAArB;AACD;;AAEDuC,kBAAM,CAACuB,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;AAC1C,kBAAI7I,MAAM,CAAC2I,MAAX,EAAmB;AACjBF,uBAAO,CAACzI,MAAM,CAAC2I,MAAR,CAAP;AACD,eAFD,MAEO;AACLD,sBAAM,CAAC,IAAIX,KAAJ,CAAU,yBAAV,CAAD,CAAN;AACD;AACF,aAND;AAOAT,kBAAM,CAACuB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CH,oBAAM,CAAC,IAAIX,KAAJ,CAAU,0BAAV,CAAD,CAAN;AACD,aAFD;AAGD,WAnBD,CAmBE,OAAO5G,KAAP,EAAc;AACduH,kBAAM,CAACvH,KAAD,CAAN;AACA;AACD;AACF,SAxCe,CAAhB;AAyCA,eAAOmH,aAAP;AACD,OAhDD;;AAiDA,UAAIQ,UAAU,GAAG,SAASA,UAAT,CAAoBC,WAApB,EAAiCC,IAAjC,EAAuCd,SAAvC,EAAkD;AACjE,YAAIa,WAAW,KAAK,IAApB,EAA0B;AACxB,iBAAO,IAAP;AACD;;AAED,YAAI7I,MAAM,GAAG6I,WAAW,CAACE,KAAZ,CAAkBC,SAAlB,EAA6BF,IAA7B,CAAb;AACAf,uBAAe,CAAC/H,MAAD,EAASgI,SAAT,CAAf;AACA,eAAOhI,MAAP;AACD,OARD,C,CAQG;;;AAEH,UAAIiJ,kBAAkB,GAAG,SAASA,kBAAT,CAA4BpE,MAA5B,EAAoC;AAC3D,YAAIqE,YAAY,GAAG,mHAAmHjC,MAAnH,CAA0HnC,IAAI,CAACC,SAAL,CAAeF,MAAf,CAA1H,EAAkJ,IAAlJ,CAAnB;;AAEA,YAAIA,MAAM,KAAK,IAAX,IAAmBuB,OAAO,CAACvB,MAAD,CAAP,KAAoB,QAA3C,EAAqD;AACnD,gBAAM,IAAIgD,KAAJ,CAAUqB,YAAV,CAAN;AACD;;AAED,YAAIjD,MAAM,CAACkD,IAAP,CAAYtE,MAAZ,EAAoBsC,MAApB,KAA+B,CAA/B,IAAoC,OAAOtC,MAAM,CAAC4C,oBAAd,KAAuC,SAA/E,EAA0F;AACxF,iBAAO5C,MAAP;AACD;;AAED,cAAM,IAAIgD,KAAJ,CAAUqB,YAAV,CAAN;AACD,OAZD;;AAcA,UAAIE,UAAJ;AACA,UAAIC,gBAAgB,GAAG,KAAvB;;AACA,UAAIC,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,aAAK,IAAIC,IAAI,GAAGC,SAAS,CAACrC,MAArB,EAA6B2B,IAAI,GAAG,IAAIW,KAAJ,CAAUF,IAAV,CAApC,EAAqDG,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGH,IAA3E,EAAiFG,IAAI,EAArF,EAAyF;AACvFZ,cAAI,CAACY,IAAD,CAAJ,GAAaF,SAAS,CAACE,IAAD,CAAtB;AACD;;AAEDL,wBAAgB,GAAG,IAAnB;AACA,YAAIrB,SAAS,GAAG2B,IAAI,CAACC,GAAL,EAAhB;AACA,eAAOvB,UAAU,CAACe,UAAD,CAAV,CAAuBlF,IAAvB,CAA4B,UAAU2E,WAAV,EAAuB;AACxD,iBAAOD,UAAU,CAACC,WAAD,EAAcC,IAAd,EAAoBd,SAApB,CAAjB;AACD,SAFM,CAAP;AAGD,OAVD;;AAYAsB,gBAAU,CAACO,iBAAX,GAA+B,UAAUhF,MAAV,EAAkB;AAC/C,YAAIwE,gBAAJ,EAAsB;AACpB,gBAAM,IAAIxB,KAAJ,CAAU,4DAAV,CAAN;AACD;;AAEDuB,kBAAU,GAAGH,kBAAkB,CAACpE,MAAD,CAA/B;AACD,OAND;;AAQAvC,aAAO,CAACgH,UAAR,GAAqBA,UAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UC1JaQ,gCAAgC;AACzC,kDAAmBnH,KAAnB,EAA0C;AAAA;;AAAvB,eAAAA,KAAA,GAAAA,KAAA;AAAyB;;AADH;AAAA;AAAA,iBAGlC,uBAAW;AACd7C,kBAAM,CAACiK,KAAP;AACH;AALwC;;AAAA;AAAA,S;;;;gBANpC;;;;AAMID,sCAAgC,6DAJ5C,gEAAU;AACPpI,gBAAQ,EAAE,4BADH;AAEPC,gBAAQ,EAAR;AAFO,OAAV,CAI4C,GAAhCmI,gCAAgC,CAAhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCQAE,kBAAkB;AAI3B,oCACYnH,OADZ,EAEYC,YAFZ,EAGYC,QAHZ,EAIYkH,KAJZ,EAKYpI,MALZ,EAMYvC,OANZ,EAMmC;AAAA;;AALvB,eAAAuD,OAAA,GAAAA,OAAA;AACA,eAAAC,YAAA,GAAAA,YAAA;AACA,eAAAC,QAAA,GAAAA,QAAA;AACA,eAAAkH,KAAA,GAAAA,KAAA;AACA,eAAApI,MAAA,GAAAA,MAAA;AACA,eAAAvC,OAAA,GAAAA,OAAA;AATL,eAAA4K,IAAA,GAAe,IAAIP,IAAJ,GAAWQ,WAAX,EAAf;AACC,eAAAtK,aAAA,GAAgB,IAAI,iDAAJ,EAAhB;AASJ;;AAXuB;AAAA;AAAA,iBAad,oBAAQ;;;;;;;;AACjB,0BAAI,CAAC,CAAC,KAAKP,OAAL,CAAac,IAAnB,EAAyB;AACrB,6BAAKd,OAAL,CAAa8K,MAAb;AACH;;AACD,2BAAKvK,aAAL,CAAmBI,GAAnB,CACI,KAAK4C,OAAL,CAAajD,SAAb,CAAuBW,SAAvB,CAAiC,YAAM;AACnC,8BAAI,CAACwC,QAAL,CAAce,IAAd,CAAmB,uGAAnB,EAAqD;AACjDC,kCAAQ,EAAE,QADuC;AAEjDC,kCAAQ,EAAE,KAFuC;AAGjDC,kCAAQ,EAAE;AAHuC,yBAArD;AAKH,uBAND,CADJ;AASA,2BAAKpE,aAAL,CAAmBI,GAAnB,CACI,KAAK4C,OAAL,CAAauB,OAAb,CACKjE,IADL,CAEQ,+DAAQ;AAAA,+BACJ,MAAI,CAAC2C,YAAL,CAAkBuB,IAAlB,CAAuB;AACnBC,8BAAI,EAAE,SADa;AAEnBC,8BAAI,EAAE,oEAFa;AAGnBC,oCAAU,EAAE,KAHO;AAInBC,qCAAW,EAAE;AAJM,yBAAvB,CADI;AAAA,uBAAR,CAFR,EAWKlE,SAXL,CAWe,YAAM;AACbmE,gCAAQ,CAACC,MAAT;AACH,uBAbL,CADJ;AAgBA,2BAAK9B,OAAL,CAAawC,IAAb,GAAoB9E,SAApB,CAA8B,YAAM;AAChC,8BAAI,CAAC0J,KAAL,CAAWI,aAAX,CAAyB9J,SAAzB,CAAmC,UAAMsE,MAAN;AAAA,iCAAgB;AAAA;AAAA;AAAA;AAAA;AAAA,wCAC1CA,MAAM,CAACO,GAAP,CAAW,MAAX,CAD0C;AAAA;AAAA;AAAA;;AAAA;AAE3C,2CAAM,KAAKvD,MAAL,CAAYsC,QAAZ,CAAqB,CAAC,QAAD,CAArB,CAAN;;AAF2C;AAAA;;AAAA;AAK/C,yCAAKtB,OAAL,CAAa8C,UAAb,CAAwB;AACpBC,yCAAG,EAAE9F,MAAM,CAAC+F,gBADQ;AAEpByE,4CAAM,EAAEzF,MAAM,CAACnB,GAAP,CAAW,MAAX;AAFY,qCAAxB;;AAL+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAhB;AAAA,yBAAnC;AAUH,uBAXD;;;;;;;;;AAYH;AAtD0B;AAAA;AAAA,iBAwDpB,uBAAW;AACd,iBAAK7D,aAAL,CAAmBsB,WAAnB;AACH;AA1D0B;AAAA;AAAA,iBA4DpB,mBAAO;AACV,oBAAQ,yEAAY6B,OAApB;AACI,mBAAK,OAAL;AACA,mBAAK,SAAL;AACA,mBAAK,WAAL;AACI,uBAAO,qBAAP;;AACJ;AACI,uBAAO,sCAAP;AANR;AAQH;AArE0B;;AAAA;AAAA,S;;;;gBATtB;;gBACA;;gBALA;;gBADA;;gBAAgB;;gBAOhB;;;;AAOIgH,wBAAkB,6DAJ9B,gEAAU;AACPtI,gBAAQ,EAAE,YADH;AAEPC,gBAAQ,EAAR;AAFO,OAAV,CAI8B,GAAlBqI,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACfb;AAAe;;;AAAA;;;;;;;;;;;;;;ACAfO,YAAM,CAACjI,OAAP,GAAiB,mBAAO;AAAC;AAAA,YAAD,CAAxB;;;;;;;;;;;;;;;;ACAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOf,UAAMkI,MAAM,GAAW,CACnB;AACIC,YAAI,EAAE,EADV;AAEIC,iBAAS,EAAE,wEAFf;AAGIC,mBAAW,EAAE,CAAC,8EAAD,EAAoB,yEAApB;AAHjB,OADmB,EAMnB;AACIF,YAAI,EAAE,KADV;AAEIC,iBAAS,EAAE;AAFf,OANmB,CAAvB;;UAiBaE,sBAAsB;AAAA;AAAA,Q;;AAAtBA,4BAAsB,6DALlC,+DAAS;AACNrI,eAAO,EAAE,CAAC,6DAAasI,QAAb,CAAsBL,MAAtB,CAAD,CADH;AAENlI,eAAO,EAAE,CAAC,4DAAD,CAFH;AAGNwI,iBAAS,EAAE,CAAC,yEAAD;AAHL,OAAT,CAKkC,GAAtBF,sBAAsB,CAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCZAG,cAAc;;;;AAChB,eAAAnL,SAAA,GAAY,IAAI,4CAAJ,EAAZ;AACA,eAAAwE,OAAA,GAAU,IAAI,4CAAJ,EAAV;AAmDV;;AArD0B;AAAA;AAAA,iBAIhB,gBAAI;AACP,mBAAO,IAAI,+CAAJ,CAAe,UAAA4G,UAAU,EAAI;AAChC,kBAAI,CAAClL,MAAM,CAACmL,GAAZ,EAAiB;AACb,oBAAM7D,MAAM,GAAGL,QAAQ,CAACW,aAAT,CAAuB,QAAvB,CAAf;AACAN,sBAAM,CAAC9C,IAAP,GAAc,iBAAd;AACA8C,sBAAM,CAAC8D,KAAP,GAAe,IAAf;AACA9D,sBAAM,CAACE,GAAP;AACAF,sBAAM,CAACuB,gBAAP,CAAwB,MAAxB,EAAgC,YAAM;AAClCqC,4BAAU,CAACG,IAAX;AACAH,4BAAU,CAACI,QAAX;AACH,iBAHD;AAIArE,wBAAQ,CAACsE,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCvD,WAAzC,CAAqDV,MAArD;AACH,eAVD,MAUO;AACH4D,0BAAU,CAACG,IAAX;AACAH,0BAAU,CAACI,QAAX;AACH;AACJ,aAfM,CAAP;AAgBH;AArBsB;AAAA;AAAA,iBAuBhB,oBAAWE,OAAX,EAAkC;AAAA;;AACrCxL,kBAAM,CAACmL,GAAP,CAAWM,EAAX,CAAcC,SAAd,CAAwB;AACpB5F,iBAAG,EAAE0F,OAAO,CAAC1F,GADO;AAEpB6F,oBAAM,EAAE,0BAFY;AAGpBC,0BAAY,EAAE,sBAHM;AAIpBC,gBAAE,EAAE;AACAC,qBAAK,EAAE,MADP;AAEAC,sBAAM,EAAE,OAFR;AAGAC,qBAAK,EAAE,EAHP;AAIAC,6BAAa,EAAE;AAJf,eAJgB;AAUpBT,qBAAO,EAAEA,OAAO,CAAChB,MAAR,GACH;AACIA,sBAAM,EAAEgB,OAAO,CAAChB;AADpB,eADG,GAIH;AACI0B,8BAAc,EAAEV,OAAO,CAACvF;AAD5B,eAdc;AAiBpBkG,oBAAM,EAAE;AACJC,6BAAa,EAAE,uBAAC5K,MAAD,EAAiB;AAC5B,sBAAIA,MAAM,CAAC6K,MAAP,KAAkB,IAAtB,EAA4B;AACxB,0BAAI,CAACvM,SAAL,CAAeuL,IAAf;AACH,mBAFD,MAEO;AACH,0BAAI,CAAC/G,OAAL,CAAa+G,IAAb;AACH;AACJ;AAPG;AAjBY,aAAxB;AA2BArL,kBAAM,CAACmL,GAAP,CAAWM,EAAX,CAAca,UAAd;AACH;AApDsB;;AAAA;AAAA,S;;AAAdrB,oBAAc,6DAH1B,iEAAW;AACR5I,kBAAU,EAAE;AADJ,OAAX,CAG0B,GAAd4I,cAAc,CAAd","file":"default~embedded-embedded-module~kyc-wizard-kyc-wizard-module-es5.js","sourcesContent":["import { HttpClient } from '@angular/common/http'\nimport { Component, EventEmitter, OnDestroy, OnInit, Output } from '@angular/core'\nimport { TranslateService } from '@ngx-translate/core'\nimport { Stripe, StripeCardElement } from '@stripe/stripe-js'\nimport { loadStripe } from '@stripe/stripe-js/pure'\nimport { Subscription } from 'rxjs'\nimport { flatMap, take } from 'rxjs/operators'\nimport { SessionService } from '../common/services/session.service'\nimport { ToastrService } from '../common/services/toastr.service'\n\n@Component({\n    selector: 'stripe-payment',\n    templateUrl: 'stripe-payment.component.html',\n})\nexport class StripePaymentComponent implements OnInit, OnDestroy {\n    public card: StripeCardElement\n    public cardError?: string\n\n    public isCardEmpty = true\n    public isLoading = false\n    public stripeState: 'loading' | 'loaded' | 'not-configured' = 'loading'\n\n    @Output()\n    public readonly onSuccess = new EventEmitter<void>()\n\n    private stripe: Stripe | null\n    private clientSecret: string\n    private subscriptions = new Subscription()\n\n    constructor(\n        private http: HttpClient,\n        private session: SessionService,\n        private toastr: ToastrService,\n        public translate: TranslateService\n    ) {}\n\n    public async ngOnInit(): Promise<void> {\n        if (!window.STRIPE_PUBLIC_KEY) {\n            this.stripeState = 'not-configured'\n            return\n        }\n        this.stripeState = 'loaded'\n        this.stripe = await loadStripe(window.STRIPE_PUBLIC_KEY)\n        this.subscriptions.add(\n            this.session.userStream\n                .pipe(\n                    take(1),\n                    flatMap(user =>\n                        this.http.post<{ clientSecret: string }>(`/users/${user.id}/start-account-opening-payment`, {})\n                    )\n                )\n                .subscribe(({ clientSecret }) => {\n                    this.clientSecret = clientSecret\n                    const elements = this.stripe?.elements()\n                    this.card = elements?.create('card')!\n                    this.card.mount('#card-element')\n                    this.card.on('change', event => {\n                        this.isCardEmpty = event.empty\n                        this.cardError = event.error?.message\n                    })\n                })\n        )\n    }\n\n    public ngOnDestroy(): void {\n        this.subscriptions.unsubscribe()\n    }\n\n    public async submit(): Promise<void> {\n        this.isLoading = true\n        try {\n            const result = await this.stripe?.confirmCardPayment(this.clientSecret, {\n                payment_method: {\n                    card: this.card,\n                },\n            })\n            if (result?.error) {\n                this.toastr.error(result.error.message || 'An error has occured')\n                return\n            }\n            this.toastr.success(this.translate.instant('stripe-payment.payment-successful'))\n            this.onSuccess.emit()\n        } finally {\n            this.isLoading = false\n        }\n    }\n}\n","export default \"<div class=\\\"modal-body text-center my-2\\\">\\n    <img src=\\\"/img/icons/file.svg\\\" class=\\\"img-md mb-3\\\" />\\n    <h4 class=\\\"text-primary mb-3\\\">Verification Complete</h4>\\n    <p class=\\\"mb-4\\\">\\n        Thank you for verifying your identity! The information provided will be reviewed for completeness and eligibility. This process usually takes\\n        <span class=\\\"text-primary\\\">1-3 business days</span>. We will notify you if we are missing any details or once the account is approved.\\n    </p>\\n    <button class=\\\"btn btn-primary btn-lg btn-block\\\" (click)=\\\"closeWindow()\\\">Close window</button>\\n</div>\\n\";","import { Injectable } from '@angular/core'\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router'\nimport { SessionService } from './services/session.service'\n\n@Injectable({ providedIn: 'root' })\nexport class LoggedInAuthGuard implements CanActivate {\n    constructor(private session: SessionService, private router: Router) {}\n    public canActivate(_: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree {\n        if (!this.session.isAuthenticated()) {\n            return this.router.parseUrl('/login?redirect=' + state.url)\n        }\n        return true\n    }\n}\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '../common/common.module'\nimport { StripePaymentComponent } from './stripe-payment-component'\n\n@NgModule({\n    declarations: [StripePaymentComponent],\n    exports: [StripePaymentComponent],\n    imports: [CommonModule],\n})\nexport class StripeModule {}\n","import { Injectable } from '@angular/core'\nimport { CanActivate, Router, UrlTree } from '@angular/router'\nimport { SessionService } from '../common/services/session.service'\n\n@Injectable()\nexport class KycWizardAuthGuard implements CanActivate {\n    constructor(private session: SessionService, private router: Router) {}\n    public canActivate(): boolean | UrlTree {\n        if (this.session.user.approvedAt) {\n            return this.router.parseUrl('/dashboard')\n        }\n        return true\n    }\n}\n","export default \"<div *ngIf=\\\"stripeState === 'loaded'\\\">\\n    <div id=\\\"card-element\\\"></div>\\n    <button\\n        *ngIf=\\\"card\\\"\\n        type=\\\"button\\\"\\n        class=\\\"btn btn-primary my-2\\\"\\n        [ngClass]=\\\"{ loading: isLoading }\\\"\\n        [disabled]=\\\"isLoading || isCardEmpty || cardError\\\"\\n        (click)=\\\"submit()\\\"\\n    >\\n        {{ 'common.pay-now' | translate }}\\n    </button>\\n    <p *ngIf=\\\"cardError\\\" class=\\\"alert alert-danger\\\">{{ cardError }}</p>\\n</div>\\n<div *ngIf=\\\"stripeState === 'loading'\\\" class=\\\"text-center\\\">{{ 'common.loading' | translate }}...</div>\\n<div *ngIf=\\\"stripeState === 'not-configured'\\\" class=\\\"alert alert-danger\\\">{{ 'common.stripe-is-not-configured' | translate }}</div>\\n\";","import { Component } from '@angular/core'\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap'\n\n@Component({\n    selector: 'kyc-wizard-completed-modal',\n    templateUrl: 'kyc-wizard-completed-modal.component.html',\n})\nexport class KycWizardCompletedModalComponent {\n    constructor(public modal: NgbActiveModal) {}\n}\n","import { HttpClient } from '@angular/common/http'\nimport { AfterViewInit, Component, OnDestroy, OnInit } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { faSearch, faShieldCheck, faUserClock, faMoneyCheckEditAlt } from '@fortawesome/pro-duotone-svg-icons'\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap'\nimport { TranslateService } from '@ngx-translate/core'\nimport { forkJoin, Subscription } from 'rxjs'\nimport { finalize, flatMap, take } from 'rxjs/operators'\nimport { environment } from 'src/environments/environment'\nimport { IUser, Verification } from '../common/api-interfaces'\nimport { BasisIdService } from '../common/services/basis-id.service'\nimport { ConfirmationService } from '../common/services/confirmation.service'\nimport { SessionService } from '../common/services/session.service'\nimport { KycWizardCompletedModalComponent } from './key-wizard-completed-modal.component'\n\n@Component({\n    selector: 'kyc-wizard',\n    templateUrl: 'kyc-wizard.component.html',\n})\nexport class KycWizardComponent implements AfterViewInit, OnDestroy, OnInit {\n    public appName = environment.appName\n\n    public user: IUser\n    public accountOpeningFeeEnabled = environment.accountOpeningFeeEnabled\n    public accountOpeningFee = '0.00'\n\n    public running = false\n    public isLoading = false\n    public hasCompleted = false\n    public isPaymentSuccessful = false\n\n    public faSearch = faSearch\n    public faUserClock = faUserClock\n    public faShieldCheck = faShieldCheck\n    public faMoneyCheckEditAlt = faMoneyCheckEditAlt\n\n    private subscriptions = new Subscription()\n    private verification: Verification\n\n    constructor(\n        private basisId: BasisIdService,\n        private http: HttpClient,\n        private router: Router,\n        private confirmation: ConfirmationService,\n        public session: SessionService,\n        public translate: TranslateService,\n        private ngbModal: NgbModal\n    ) {}\n\n    public ngOnInit(): void {\n        if (this.accountOpeningFeeEnabled) {\n            this.subscriptions.add(\n                this.session.userStream\n                    .pipe(\n                        take(1),\n                        flatMap(user =>\n                            forkJoin([\n                                this.http.get<IUser>(`/users/${user.id}`),\n                                this.http.get<{ accountOpeningFee: string }>(`/users/${user.id}/account-opening-fee`),\n                            ])\n                        )\n                    )\n                    .subscribe(([user, fee]) => {\n                        this.user = user\n                        this.accountOpeningFee = fee.accountOpeningFee\n                    })\n            )\n        }\n    }\n\n    public async ngAfterViewInit(): Promise<void> {\n        this.subscriptions.add(\n            this.basisId.onSuccess\n                .pipe(\n                    flatMap(() =>\n                        this.http.post<void>(`/verifications/${this.verification.id}/set-completed`, {\n                            completed: true,\n                        })\n                    )\n                )\n                .subscribe(async () => {\n                    const modal = this.ngbModal.open(KycWizardCompletedModalComponent, {\n                        backdrop: 'static',\n                        keyboard: false,\n                        centered: true,\n                    })\n                    await modal.result.then(() => this.router.navigate(['/dashboard']))\n                })\n        )\n        this.subscriptions.add(\n            this.basisId.onError\n                .pipe(\n                    flatMap(() =>\n                        this.confirmation.show({\n                            type: 'warning',\n                            text: this.translate.instant('common.there-was-a-problem-in-verification'),\n                            showCancel: false,\n                            confirmText: this.translate.instant('reload-page'),\n                        })\n                    )\n                )\n                .subscribe(() => {\n                    location.reload()\n                })\n        )\n\n        this.http\n            .head(`/users/${this.session.user.id}/verifications`, {\n                params: { completed: JSON.stringify(true) },\n                observe: 'response',\n            })\n            .subscribe(response => {\n                const hasCompletedVerification =\n                    response && response.headers.has('x-total-count') ? ~~response.headers.get('x-total-count')! : 0\n                this.hasCompleted = hasCompletedVerification > 0\n            })\n    }\n\n    public ngOnDestroy(): void {\n        this.subscriptions.unsubscribe()\n    }\n\n    public startVerification(): void {\n        this.isLoading = true\n        this.basisId\n            .init()\n            .pipe(\n                flatMap(() =>\n                    this.http.post<Verification>(`/verifications`, {\n                        user: {\n                            id: this.session.user.id,\n                        },\n                    })\n                ),\n                finalize(() => {\n                    this.isLoading = false\n                })\n            )\n            .subscribe(verification => {\n                if (window.DEBUG) {\n                    // eslint-disable-next-line no-console\n                    console.log('BasisID Hash:', verification.hash)\n                }\n                window.scroll(0, 0)\n                this.running = true\n                this.basisId.loadWidget({\n                    key: this.session.user.type === 'business' ? window.BASIS_ID_KYB_KEY! : window.BASIS_ID_KYC_KEY!,\n                    formToken: verification.formToken,\n                })\n                this.verification = verification\n            })\n    }\n\n    public getLogo(): string {\n        switch (environment.appName) {\n            case 'birex':\n            case 'usunpay':\n            case 'etransfer':\n                return '/img/brand/logo.svg'\n            default:\n                return '/img/brand/logo-white-horizontal.svg'\n        }\n    }\n\n    public getButtonClass(): string {\n        switch (environment.appName) {\n            case 'sgpmx':\n                return 'btn-primary'\n            default:\n                return 'btn-secondary'\n        }\n    }\n}\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '../common/common.module'\nimport { StripeModule } from '../stripe-payment/stripe.module'\nimport { KycWizardCompletedModalComponent } from './key-wizard-completed-modal.component'\nimport { KycWizardRoutingModule } from './kyc-wizard-routing.module'\nimport { KycWizardComponent } from './kyc-wizard.component'\nimport { UboWizardComponent } from './ubo-wizard.component'\n\n@NgModule({\n    declarations: [KycWizardComponent, KycWizardCompletedModalComponent, UboWizardComponent],\n    imports: [CommonModule, KycWizardRoutingModule, StripeModule],\n    exports: [KycWizardCompletedModalComponent],\n})\nexport class KycWizardModule {}\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.32.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar validateLoadParams = function validateLoadParams(params) {\n  var errorMessage = \"invalid load parameters; expected object of shape\\n\\n    {advancedFraudSignals: boolean}\\n\\nbut received\\n\\n    \".concat(JSON.stringify(params), \"\\n\");\n\n  if (params === null || _typeof(params) !== 'object') {\n    throw new Error(errorMessage);\n  }\n\n  if (Object.keys(params).length === 1 && typeof params.advancedFraudSignals === 'boolean') {\n    return params;\n  }\n\n  throw new Error(errorMessage);\n};\n\nvar loadParams;\nvar loadStripeCalled = false;\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadStripeCalled = true;\n  var startTime = Date.now();\n  return loadScript(loadParams).then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nloadStripe.setLoadParameters = function (params) {\n  if (loadStripeCalled) {\n    throw new Error('You cannot change load parameters after calling loadStripe');\n  }\n\n  loadParams = validateLoadParams(params);\n};\n\nexports.loadStripe = loadStripe;\n","import { Component } from '@angular/core'\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap'\n\n@Component({\n    selector: 'ubo-wizard-completed-modal',\n    templateUrl: 'ubo-wizard-completed-modal.component.html',\n})\nexport class UboWizardCompletedModalComponent {\n    constructor(public modal: NgbActiveModal) {}\n\n    public closeWindow(): void {\n        window.close()\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap'\nimport { Subscription } from 'rxjs'\nimport { flatMap } from 'rxjs/operators'\nimport { environment } from 'src/environments/environment'\nimport { BasisIdService } from '../common/services/basis-id.service'\nimport { ConfirmationService } from '../common/services/confirmation.service'\nimport { SessionService } from '../common/services/session.service'\nimport { UboWizardCompletedModalComponent } from './ubo-wizard-completed-modal.component'\n\n@Component({\n    selector: 'ubo-wizard',\n    templateUrl: 'ubo-wizard.component.html',\n})\nexport class UboWizardComponent implements OnInit, OnDestroy {\n    public year: number = new Date().getFullYear()\n    private subscriptions = new Subscription()\n\n    constructor(\n        private basisId: BasisIdService,\n        private confirmation: ConfirmationService,\n        private ngbModal: NgbModal,\n        private route: ActivatedRoute,\n        private router: Router,\n        private session: SessionService\n    ) {}\n\n    public async ngOnInit(): Promise<void> {\n        if (!!this.session.user) {\n            this.session.logout()\n        }\n        this.subscriptions.add(\n            this.basisId.onSuccess.subscribe(() => {\n                this.ngbModal.open(UboWizardCompletedModalComponent, {\n                    backdrop: 'static',\n                    keyboard: false,\n                    centered: true,\n                })\n            })\n        )\n        this.subscriptions.add(\n            this.basisId.onError\n                .pipe(\n                    flatMap(() =>\n                        this.confirmation.show({\n                            type: 'warning',\n                            text: 'There was a problem in the verification process. Please try again.',\n                            showCancel: false,\n                            confirmText: 'Reload page',\n                        })\n                    )\n                )\n                .subscribe(() => {\n                    location.reload()\n                })\n        )\n        this.basisId.init().subscribe(() => {\n            this.route.queryParamMap.subscribe(async params => {\n                if (!params.has('code')) {\n                    await this.router.navigate(['/login'])\n                    return\n                }\n                this.basisId.loadWidget({\n                    key: window.BASIS_ID_KYB_KEY!,\n                    invite: params.get('code')!,\n                })\n            })\n        })\n    }\n\n    public ngOnDestroy(): void {\n        this.subscriptions.unsubscribe()\n    }\n\n    public getLogo(): string {\n        switch (environment.appName) {\n            case 'birex':\n            case 'usunpay':\n            case 'etransfer':\n                return '/img/brand/logo.svg'\n            default:\n                return '/img/brand/logo-white-horizontal.svg'\n        }\n    }\n}\n","export default \"<div class=\\\"modal-body text-center my-2\\\">\\n    <img src=\\\"/img/icons/file.svg\\\" class=\\\"img-md mb-3\\\" />\\n    <h4 class=\\\"text-primary mb-3\\\">{{ 'common.verification-complete' | translate }}</h4>\\n    <p class=\\\"mb-4\\\">\\n        {{ 'common.thank-you-for-verifying' | translate }}\\n        <span class=\\\"text-primary\\\">{{ 'common.one-to-three-days' | translate }}</span> {{ 'common.we-will-notify' | translate }}\\n    </p>\\n    <button class=\\\"btn btn-primary btn-lg btn-block\\\" (click)=\\\"modal.close()\\\">{{ 'common.got-it' | translate }}</button>\\n</div>\\n\";","module.exports = require('./dist/pure.js');\n","export default \"<div class=\\\"kyc-wizard fullscreen-bg-body\\\">\\n    <a>\\n        <img class=\\\"login-logo\\\" [src]=\\\"getLogo()\\\" />\\n    </a>\\n    <div id=\\\"bas-widget-container\\\"></div>\\n    <div class=\\\"mb-5 text-center text-white\\\">&copy; 2005 - {{ year }} Aerapass Limited - All rights reserved.</div>\\n</div>\\n\";","export default \"<div class=\\\"kyc-wizard fullscreen-bg-body\\\">\\n    <a [routerLink]=\\\"['/dashboard']\\\">\\n        <img class=\\\"login-logo\\\" [src]=\\\"getLogo()\\\" />\\n    </a>\\n    <div class=\\\"card max-width-md\\\" *ngIf=\\\"!running\\\">\\n        <div class=\\\"card-body\\\">\\n            <div class=\\\"alert alert-primary\\\" role=\\\"alert\\\" *ngIf=\\\"hasCompleted\\\">\\n                {{ 'common.thank-you-for-completing' | translate }}.\\n                <a [routerLink]=\\\"['/dashboard']\\\">{{ 'common.proceed-to-dashboard' | translate }}</a>\\n            </div>\\n            <h2 class=\\\"text-primary mb-1\\\">{{ 'common.account-setup' | translate }}</h2>\\n            <p class=\\\"mb-3\\\" *ngIf=\\\"appName === 'sgpmx'; else text\\\">\\n                You will have the option to preview your account or complete registration of your Stacker Market account.\\n            </p>\\n            <ng-template #text>\\n                <p class=\\\"mb-3\\\">{{ 'kyc-wizard.to-complete' | translate }}:</p>\\n            </ng-template>\\n            <ng-container *ngIf=\\\"appName === 'sgpmx'\\\">\\n                <h5 class=\\\"text-primary font-weight-bold\\\">Option 1: PREVIEW ACCOUNT</h5>\\n                <p>You may preview your dashboard and Stacker Market features by click below and skipping directly to your Account Dashboard.</p>\\n                <button [routerLink]=\\\"['/dashboard']\\\" class=\\\"btn btn-primary btn-lg btn-block mb-4\\\">Click here to skip to Dashboard</button>\\n                <h5 class=\\\"text-primary font-weight-bold\\\">Option 2: COMPLETE REGISTRATION</h5>\\n                <p>Complete your full registration by following the steps below.</p>\\n                <div class=\\\"callout callout-info bg-light mb-4\\\">\\n                    <h5 class=\\\"font-weight-bold text-dark\\\">LIMITED TIME OFFER</h5>\\n                    <p>\\n                        By completing your registration and activating your Stacker Market Pro account with physical/virtual prepaid/debit card, you\\n                        will receive 200.00 USD worth of silver in your account.\\n                    </p>\\n                </div>\\n            </ng-container>\\n            <ng-container *ngIf=\\\"!accountOpeningFeeEnabled; else accountOpeningFeeFlow\\\">\\n                <div class=\\\"icon-callout\\\">\\n                    <div class=\\\"icon\\\">\\n                        <fa-icon [icon]=\\\"faSearch\\\"></fa-icon>\\n                    </div>\\n                    <div class=\\\"ml-3\\\">\\n                        <h5 class=\\\"text-secondary mb-0\\\">{{ 'kyc-wizard.step-one' | translate }}</h5>\\n                        <p>\\n                            {{ 'kyc-wizard.step-one-desc' | translate }}\\n                        </p>\\n                    </div>\\n                </div>\\n                <div class=\\\"icon-callout\\\">\\n                    <div class=\\\"icon\\\">\\n                        <fa-icon [icon]=\\\"faUserClock\\\"></fa-icon>\\n                    </div>\\n\\n                    <div class=\\\"ml-3\\\">\\n                        <h5 class=\\\"text-secondary mb-0\\\">{{ 'kyc-wizard.step-two' | translate }}</h5>\\n                        <p>\\n                            {{ 'kyc-wizard.step-two-desc' | translate }}\\n                        </p>\\n                    </div>\\n                </div>\\n            </ng-container>\\n            <ng-template #accountOpeningFeeFlow>\\n                <div class=\\\"icon-callout\\\">\\n                    <div class=\\\"icon\\\">\\n                        <fa-icon [icon]=\\\"faMoneyCheckEditAlt\\\"></fa-icon>\\n                    </div>\\n                    <div class=\\\"ml-3\\\">\\n                        <h5 class=\\\"text-secondary mb-0\\\">{{ 'kyc-wizard.step-one-account' | translate }}</h5>\\n                        <p>\\n                            {{ 'kyc-wizard.step-one-account-desc' | translate }}\\n                            <span class=\\\"font-weight-bold\\\">{{ accountOpeningFee | amount }} USD</span>\\n                            {{ 'kyc-wizard.using-your-credit' | translate }}\\n                        </p>\\n                        <ng-container *ngIf=\\\"!!user\\\">\\n                            <ng-container *ngIf=\\\"!user?.accountOpeningFeePaidAt && !isPaymentSuccessful; else feePaid\\\">\\n                                <stripe-payment (onSuccess)=\\\"isPaymentSuccessful = true\\\"></stripe-payment>\\n                            </ng-container>\\n                            <ng-template #feePaid>\\n                                <div class=\\\"alert alert-success\\\">{{ 'kyc-wizard.you-have-paid' | translate }}</div>\\n                            </ng-template>\\n                        </ng-container>\\n                    </div>\\n                </div>\\n                <div class=\\\"icon-callout\\\">\\n                    <div class=\\\"icon\\\">\\n                        <fa-icon [icon]=\\\"faSearch\\\"></fa-icon>\\n                    </div>\\n                    <div class=\\\"ml-3\\\">\\n                        <h5 class=\\\"text-secondary mb-0\\\">{{ 'kyc-wizard.step-two-account' | translate }}</h5>\\n                        <p>\\n                            {{ 'kyc-wizard.step-two-account-desc' | translate }}\\n                        </p>\\n                    </div>\\n                </div>\\n            </ng-template>\\n            <div class=\\\"icon-callout\\\">\\n                <div class=\\\"icon\\\">\\n                    <fa-icon [icon]=\\\"faShieldCheck\\\"></fa-icon>\\n                </div>\\n                <div class=\\\"ml-3\\\">\\n                    <ng-container *ngIf=\\\"appName === 'sgpmx'; else defaultText\\\">\\n                        <h5 class=\\\"text-secondary mb-0\\\">{{ 'kyc-wizard.step-three-account' | translate }}</h5>\\n                        <p>{{ 'kyc-wizard.step-three-account' | translate }}</p>\\n                    </ng-container>\\n                    <ng-template #defaultText>\\n                        <h5 class=\\\"text-secondary mb-0\\\">{{ 'kyc-wizard.step-three-account-alt' | translate }}</h5>\\n                        <p>{{ 'kyc-wizard.step-three-account-desc' | translate }}</p>\\n                    </ng-template>\\n                </div>\\n            </div>\\n            <ng-container *ngIf=\\\"session.userStream | async; let user\\\">\\n                <div class=\\\"d-flex flex-column align-items-center mb-3\\\">\\n                    <small class=\\\"text-muted mb-1\\\">{{ 'kyc-wizard.logged-in-as' | translate }}</small>\\n                    <div class=\\\"account-info\\\">\\n                        <user-display [user]=\\\"user\\\" [displayBadges]=\\\"false\\\" [disableLink]=\\\"true\\\"> </user-display>\\n                    </div>\\n                </div>\\n            </ng-container>\\n            <button\\n                class=\\\"btn btn-block btn-lg\\\"\\n                (click)=\\\"startVerification()\\\"\\n                [ngClass]=\\\"getButtonClass() + (isLoading ? ' loading' : '')\\\"\\n                [disabled]=\\\"isLoading || hasCompleted || (accountOpeningFeeEnabled && !user?.accountOpeningFeePaidAt && !isPaymentSuccessful)\\\"\\n            >\\n                {{ 'kyc-wizard.start-verification' | translate }}\\n            </button>\\n        </div>\\n    </div>\\n    <div id=\\\"bas-widget-container\\\" [hidden]=\\\"!running\\\"></div>\\n    <div class=\\\"mb-5 text-center\\\">\\n        <a [routerLink]=\\\"['/dashboard']\\\" class=\\\"text-white\\\">{{ 'kyc-wizard.no-documents' | translate }}</a>\\n    </div>\\n</div>\\n\";","import { NgModule } from '@angular/core'\nimport { RouterModule, Routes } from '@angular/router'\nimport { LoggedInAuthGuard } from '../common/logged-in.auth-guard'\nimport { KycWizardAuthGuard } from './kyc-wizard.auth-guard'\nimport { KycWizardComponent } from './kyc-wizard.component'\nimport { UboWizardComponent } from './ubo-wizard.component'\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: KycWizardComponent,\n        canActivate: [LoggedInAuthGuard, KycWizardAuthGuard],\n    },\n    {\n        path: 'ubo',\n        component: UboWizardComponent,\n    },\n]\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n    providers: [KycWizardAuthGuard],\n})\nexport class KycWizardRoutingModule {}\n","import { Injectable } from '@angular/core'\nimport { Observable, Subject } from 'rxjs'\n\nexport interface BasisIdOptions {\n    key: string\n    formToken?: string\n    invite?: string\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class BasisIdService {\n    public onSuccess = new Subject<void>()\n    public onError = new Subject<void>()\n\n    public init(): Observable<void> {\n        return new Observable(subscriber => {\n            if (!window.BAS) {\n                const script = document.createElement('script')\n                script.type = 'text/javascript'\n                script.async = true\n                script.src = `https://api.basisid.com/assets/js/widget.multi.js`\n                script.addEventListener('load', () => {\n                    subscriber.next()\n                    subscriber.complete()\n                })\n                document.getElementsByTagName('head')[0].appendChild(script)\n            } else {\n                subscriber.next()\n                subscriber.complete()\n            }\n        })\n    }\n\n    public loadWidget(options: BasisIdOptions): void {\n        window.BAS.AS.initFrame({\n            key: options.key,\n            bas_gw: 'https://api.basisid.com/',\n            container_id: 'bas-widget-container',\n            ui: {\n                width: '100%',\n                height: '705px',\n                style: '',\n                mobile_height: 'auto',\n            },\n            options: options.invite\n                ? {\n                      invite: options.invite,\n                  }\n                : {\n                      api_form_token: options.formToken,\n                  },\n            events: {\n                onManualCheck: (result: any) => {\n                    if (result.status === 'ok') {\n                        this.onSuccess.next()\n                    } else {\n                        this.onError.next()\n                    }\n                },\n            },\n        })\n        window.BAS.AS.showWidget()\n    }\n}\n"]}