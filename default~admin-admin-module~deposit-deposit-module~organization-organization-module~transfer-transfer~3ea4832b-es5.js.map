{"version":3,"sources":["webpack:///src/app/common/payment/beneficiary-book/beneficiary-book.component.html","webpack:///src/app/common/payment/email-invite-modal/email-invite-modal.component.html","webpack:///src/app/common/payment/email-invite-modal/email-invite-modal.component.ts","webpack:///src/app/common/payment/beneficiary-book/beneficiary-book.component.ts","webpack:///src/app/common/payment/payment.module.ts"],"names":["EmailInviteModalComponent","activeModal","onInvite","user","faUserAltSlash","displayName","selector","template","BeneficiaryBookComponent","http","ngbModal","changeDetector","route","router","session","confirmation","modal","toastr","translate","onSelect","defaultLimit","isLoading","isSaving","isDeleting","faTimes","faPencil","apiUrl","id","queryParams","type","eq","beneficiary","open","backdrop","windowClass","form","componentInstance","compact","item","beneficiaryMethods","hasPermission","push","onSave","subscribe","close","updateEvent","next","onDelete","show","text","instant","confirmText","confirmClass","pipe","result","CONFIRMED","success","PaymentFormModule","declarations","exports","imports"],"mappings":"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","file":"default~admin-admin-module~deposit-deposit-module~organization-organization-module~transfer-transfer~3ea4832b-es5.js","sourcesContent":["export default \"<div class=\\\"modal-header\\\">\\n    <h5 class=\\\"modal-title\\\">{{ 'common.beneficiary-templates' | translate }}</h5>\\n    <button type=\\\"button\\\" class=\\\"btn btn-round close close-modal\\\" (click)=\\\"modal.dismiss()\\\">&times;</button>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"row no-gutters align-items-center mb-3\\\">\\n        <div class=\\\"col-lg-7 mb-2 mb-lg-0\\\">\\n            <div class=\\\"input-group\\\">\\n                <span class=\\\"input-group-prepend\\\">\\n                    <span class=\\\"input-group-text\\\"><fa-icon [icon]=\\\"faSearch\\\"></fa-icon></span>\\n                </span>\\n                <input\\n                    type=\\\"text\\\"\\n                    name=\\\"searchText\\\"\\n                    (ngModelChange)=\\\"searchEvent.next()\\\"\\n                    [placeholder]=\\\"'common.search' | translate\\\"\\n                    class=\\\"form-control\\\"\\n                    [(ngModel)]=\\\"search\\\"\\n                />\\n            </div>\\n        </div>\\n        <div class=\\\"col-lg-17 d-flex justify-content-between align-items-center\\\">\\n            <span class=\\\"ml-lg-3\\\"\\n                >{{ count | number }} {{ (count === 1 ? 'common.entry-found' : 'common.entries-found') | translate | lowercase }}</span\\n            >\\n            <div class=\\\"d-flex align-items-center\\\">\\n                <ng-select\\n                    class=\\\"mr-2\\\"\\n                    [(ngModel)]=\\\"limit\\\"\\n                    dropdownPosition=\\\"auto\\\"\\n                    (change)=\\\"select(1)\\\"\\n                    [items]=\\\"limitOpts\\\"\\n                    [placeholder]=\\\"'common.show-entries-per-page' | translate\\\"\\n                    [clearable]=\\\"false\\\"\\n                    [searchable]=\\\"false\\\"\\n                    required\\n                >\\n                    <ng-template ng-label-tmp let-item=\\\"item\\\">{{ 'common.show-entries' | translate: { value: item } }}</ng-template>\\n                    <ng-template ng-option-tmp let-item=\\\"item\\\">{{ item }} {{ 'common.entries' | translate }}</ng-template>\\n                </ng-select>\\n                <ngb-pagination\\n                    [(page)]=\\\"page\\\"\\n                    [collectionSize]=\\\"count\\\"\\n                    (pageChange)=\\\"select()\\\"\\n                    [pageSize]=\\\"limit\\\"\\n                    [maxSize]=\\\"5\\\"\\n                    [ellipses]=\\\"false\\\"\\n                    [rotate]=\\\"true\\\"\\n                    [boundaryLinks]=\\\"true\\\"\\n                >\\n                </ngb-pagination>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"table-responsive position-relative\\\">\\n        <table class=\\\"table table-hover table-bordered table-data\\\">\\n            <thead class=\\\"thead-light\\\">\\n                <tr>\\n                    <th scope=\\\"col\\\">#</th>\\n                    <th scope=\\\"col\\\">{{ 'common.template' | translate | lowercase }}</th>\\n                    <th scope=\\\"col\\\">{{ 'common.actions' | translate }}</th>\\n                </tr>\\n            </thead>\\n            <tbody>\\n                <ng-container *ngIf=\\\"itemsStream | async; let items\\\">\\n                    <tr *ngFor=\\\"let item of items\\\" class=\\\"clickable\\\" (click)=\\\"onSelect.emit(item)\\\">\\n                        <th scope=\\\"row\\\" [width]=\\\"'1%'\\\">\\n                            <uuid [value]=\\\"item.id\\\"></uuid>\\n                        </th>\\n                        <td class=\\\"p-2\\\">\\n                            <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                                <span\\n                                    class=\\\"text-uppercase label label-xs\\\"\\n                                    [ngClass]=\\\"{\\n                                        'label-primary': item.method === 'swift',\\n                                        'label-success': item.method === 'local',\\n                                        'label-warning': item.method === 'crypto'\\n                                    }\\\"\\n                                >\\n                                    {{ item.method }} - {{ item.currency?.code }}\\n                                </span>\\n                                <small class=\\\"text-muted\\\">{{ item.createdAt | date }}</small>\\n                            </div>\\n                            <div>\\n                                {{ item.method === 'crypto' && !item.accountHolder ? ('common.wallet-address' | translate) : item.accountHolder }}\\n                            </div>\\n                            <span class=\\\"text-muted\\\">{{ item.accountNumber }}</span>\\n                        </td>\\n                        <td class=\\\"action\\\">\\n                            <button\\n                                type=\\\"button\\\"\\n                                class=\\\"btn btn-primary-air btn-sm mr-1\\\"\\n                                (click)=\\\"$event.stopPropagation(); openBeneficiaryForm(item)\\\"\\n                            >\\n                                <fa-icon [icon]=\\\"faPencil\\\" [fixedWidth]=\\\"true\\\"></fa-icon>\\n                            </button>\\n                            <button type=\\\"button\\\" class=\\\"btn btn-danger-air btn-sm\\\" (click)=\\\"$event.stopPropagation(); delete(item)\\\">\\n                                <fa-icon [icon]=\\\"faTimes\\\" [fixedWidth]=\\\"true\\\"></fa-icon>\\n                            </button>\\n                        </td>\\n                    </tr>\\n                    <tr *ngIf=\\\"items.length === 0\\\">\\n                        <td colspan=\\\"9\\\" class=\\\"text-center\\\">{{ 'common.no-entries-found' | translate }}</td>\\n                    </tr>\\n                </ng-container>\\n            </tbody>\\n        </table>\\n        <ng-container *ngIf=\\\"isFetching | async\\\">\\n            <circle-spinner></circle-spinner>\\n        </ng-container>\\n    </div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary btn-w-sm\\\" (click)=\\\"openBeneficiaryForm($any({ type: 'template', user: { id: session.user.id } }))\\\">\\n        <fa-icon class=\\\"mr-1\\\" [icon]=\\\"faPlus\\\"></fa-icon> {{ 'common.new-beneficiary' | translate }}\\n    </button>\\n</div>\\n\";","export default \"<div class=\\\"modal-header\\\">\\n    <h5 class=\\\"modal-title\\\">{{ 'common.invite-to' | translate }} {{ displayName }}</h5>\\n    <button type=\\\"button\\\" class=\\\"btn btn-round close close-modal\\\" (click)=\\\"activeModal.dismiss()\\\">&times;</button>\\n</div>\\n<div class=\\\"modal-body my-2\\\">\\n    <div class=\\\"text-center\\\">\\n        <fa-icon class=\\\"text-muted\\\" [icon]=\\\"faUserAltSlash\\\" size=\\\"3x\\\"></fa-icon>\\n        <h4 class=\\\"my-2\\\">\\n            {{ 'common.do-you-want-to-invite' | translate }} \\\"{{ email }}\\\" {{ 'common.to' | translate | lowercase }} {{ displayName }}?\\n        </h4>\\n    </div>\\n    <p class=\\\"text-muted\\\">If the recipient registers, this transaction will be processed immediately.</p>\\n    <p>Please enter the recipient's name in order for us to address him/her properly.</p>\\n    <form #form=\\\"ngForm\\\" class=\\\"form-validation\\\">\\n        <div class=\\\"row\\\">\\n            <div class=\\\"form-group col-sm-12\\\">\\n                <label class=\\\"form-control-label font-md\\\" for=\\\"name\\\">{{ 'common.name' | translate }}</label>\\n                <input\\n                    type=\\\"text\\\"\\n                    class=\\\"form-control form-control-lg\\\"\\n                    id=\\\"name\\\"\\n                    name=\\\"name\\\"\\n                    [(ngModel)]=\\\"user.name\\\"\\n                    #name=\\\"ngModel\\\"\\n                    autocomplete=\\\"given-name\\\"\\n                    required\\n                    emptyToNull\\n                />\\n                <div *ngIf=\\\"name.invalid && (form.submitted || name.dirty)\\\" class=\\\"error-messages\\\">\\n                    <div class=\\\"form-control-feedback\\\" *ngIf=\\\"name?.errors?.required\\\">{{ 'common.this-is-required' | translate }}</div>\\n                </div>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer d-flex justify-content-end\\\">\\n    <button class=\\\"btn btn-default btn-w-sm\\\" (click)=\\\"activeModal.dismiss()\\\">{{ 'common.dont-invite' | translate }}</button>\\n    <button class=\\\"btn btn-success btn-w-sm ml-1\\\" [disabled]=\\\"form.invalid\\\" (click)=\\\"onInvite.next(user)\\\">{{ 'common.invite' | translate }}</button>\\n</div>\\n\";","import { Component, Input } from '@angular/core'\nimport { faUserAltSlash } from '@fortawesome/pro-regular-svg-icons'\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap'\nimport { Subject } from 'rxjs'\nimport { environment } from 'src/environments/environment'\nimport { IUser } from '../../api-interfaces'\n\n@Component({\n    selector: 'email-invite-modal',\n    templateUrl: 'email-invite-modal.component.html',\n})\nexport class EmailInviteModalComponent {\n    @Input()\n    public email: string\n    public onInvite = new Subject<IUser>()\n    public user: IUser = {} as IUser\n    public faUserAltSlash = faUserAltSlash\n    public displayName = environment.displayName\n\n    constructor(public activeModal: NgbActiveModal) {}\n}\n","import { HttpClient } from '@angular/common/http'\nimport { ChangeDetectorRef, Component, EventEmitter, OnInit, Output } from '@angular/core'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport { faPencil, faTimes } from '@fortawesome/pro-solid-svg-icons'\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap'\nimport { TranslateService } from '@ngx-translate/core'\nimport { filter, finalize, flatMap } from 'rxjs/operators'\nimport { IBeneficiary } from '../../api-interfaces'\nimport { BeneficiaryFormComponent } from '../../beneficiary-form/beneficiary-form.component'\nimport { ListComponent } from '../../list.component'\nimport { Beneficiary } from '../../models/accounting/beneficiary.model'\nimport { ConfirmationResult, ConfirmationService } from '../../services/confirmation.service'\nimport { SessionService } from '../../services/session.service'\nimport { ToastrService } from '../../services/toastr.service'\n\n@Component({\n    selector: 'beneficiary-book',\n    templateUrl: 'beneficiary-book.component.html',\n})\nexport class BeneficiaryBookComponent extends ListComponent<IBeneficiary> implements OnInit {\n    @Output()\n    public readonly onSelect = new EventEmitter<IBeneficiary>()\n\n    public defaultLimit = 5\n\n    public isLoading = false\n    public isSaving = false\n    public isDeleting = false\n\n    public faTimes = faTimes\n    public faPencil = faPencil\n\n    constructor(\n        http: HttpClient,\n        ngbModal: NgbModal,\n        changeDetector: ChangeDetectorRef,\n        route: ActivatedRoute,\n        router: Router,\n        session: SessionService,\n        confirmation: ConfirmationService,\n        public modal: NgbActiveModal,\n        private toastr: ToastrService,\n        public translate: TranslateService\n    ) {\n        super(http, ngbModal, changeDetector, route, router, session, confirmation)\n    }\n\n    public ngOnInit(): void {\n        this.apiUrl = `/users/${this.session.user.id}/beneficiaries`\n        this.queryParams = {\n            type: {\n                eq: 'template',\n            },\n        }\n        super.ngOnInit()\n    }\n\n    public openBeneficiaryForm(beneficiary: Beneficiary): void {\n        const modal = this.ngbModal.open(BeneficiaryFormComponent, {\n            backdrop: 'static',\n            windowClass: 'modal-primary',\n        })\n        const form = modal.componentInstance as BeneficiaryFormComponent\n        form.compact = true\n        form.item = beneficiary\n        // Only display methods that are applicable to the user\n        form.beneficiaryMethods = []\n        if (this.session.user.hasPermission('payment-swift')) {\n            form.beneficiaryMethods.push('swift')\n        }\n        if (this.session.user.hasPermission('payment-local')) {\n            form.beneficiaryMethods.push('local')\n        }\n        if (this.session.user.hasPermission('payment-crypto')) {\n            form.beneficiaryMethods.push('crypto')\n        }\n        form.onSave.subscribe(() => {\n            modal.close()\n            this.updateEvent.next()\n        })\n        form.onDelete.subscribe(() => {\n            modal.close()\n            this.updateEvent.next()\n        })\n    }\n\n    public delete(beneficiary: Beneficiary): void {\n        this.confirmation\n            .show({\n                type: 'danger',\n                text: `${this.translate.instant(\n                    'common.are-you-sure-want-to-delete-beneficiary'\n                )}<br>${this.translate.instant('common.you-cant-undo-action')}`,\n                confirmText: this.translate.instant('common.delete'),\n                confirmClass: 'danger',\n            })\n            .pipe(\n                filter(result => result === ConfirmationResult.CONFIRMED),\n                flatMap(() => {\n                    this.isDeleting = true\n                    return this.http.delete<void>(`/beneficiaries/${beneficiary.id}`)\n                }),\n                finalize(() => {\n                    this.isDeleting = false\n                })\n            )\n            .subscribe(() => {\n                this.toastr.success(this.translate.instant('common.beneficiary-deleted'))\n                this.updateEvent.next()\n            })\n    }\n\n    protected async changeState(): Promise<void> {\n        // do nothing\n    }\n}\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '../common.module'\nimport { TransactionModule } from '../transaction/transaction.module'\nimport { BeneficiaryBookComponent } from './beneficiary-book/beneficiary-book.component'\nimport { EmailInviteModalComponent } from './email-invite-modal/email-invite-modal.component'\nimport { PaymentConfirmationComponent } from './payment-confirmation/payment-confirmation.component'\n\n@NgModule({\n    declarations: [PaymentConfirmationComponent, EmailInviteModalComponent, BeneficiaryBookComponent],\n    exports: [BeneficiaryBookComponent],\n    imports: [CommonModule, TransactionModule],\n})\nexport class PaymentFormModule {}\n"]}